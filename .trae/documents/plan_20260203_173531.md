Je ne peux pas me connecter directement à votre instance Supabase (problème d'authentification/droits admin).t, voici **le code SQL exact** que vous devez copier-coller dans l'éditeur SQL de Supabase pour créer la table `user_profiles` correctement configurée pour votre projet :

```sql
-- 1. Créer le type ENUM pour les rôles (correspondant à votre types.ts)
create type public.user_role as enum ('MANAGER', 'TECHNICIAN');

-- 2. Créer la table user_profiles
create table public.user_profiles (
  id uuid references auth.users on delete cascade not null primary key,
  email text,
  first_name text,
  last_name text,
  role user_role default 'TECHNICIAN'::user_role,
  avatar_url text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 3. Activer la sécurité RLS (Row Level Security)
alter table public.user_profiles enable row level security;

-- 4. Ajouter les politiques de sécurité (Policies)
-- Tout le monde peut voir les profils (nécessaire pour afficher les noms dans les suggestions)
create policy "Tout le monde peut voir les profils"
  on public.user_profiles for select
  using (true);

-- Chacun peut modifier son propre profil
create policy "Chacun peut modifier son propre profil"
  on public.user_profiles for update
  using (auth.uid() = id);

-- Trigger pour mettre à jour automatiquement updated_at
create extension if not exists moddatetime schema extensions;

create trigger handle_updated_at before update on public.user_profiles
  for each row execute procedure moddatetime (updated_at);
```

<br />

Cependan**Instructions :**

1. Allez dans votre tableau de bord Supabase.
2. Cliquez sur **SQL Editor** (icône terminal à gauche).
3. Collez ce code.
4. Cliquez sur **RUN**.

Cela créera la structure nécessaire pour que l'application fonctionne sans erreur.
